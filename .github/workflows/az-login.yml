name: Login to Azure

on: [push]

env:
  AZURE_SUBSCRIPTION: ${{ secrets.AZURE_SUBSCRIPTION_ID }}

jobs:
  login:
    runs-on: ubuntu-latest
    steps:
      - name: Azure Login
        uses: azure/login@v1
        with:
          creds: ${{ secrets.AZURE_CLIENT_ID }}

      - name: Set Subscription
        run: az account set --subscription ${{ env.AZURE_SUBSCRIPTION }}

      - name: List Resource Groups
        run: az group list --query "[].name" -o tsv
